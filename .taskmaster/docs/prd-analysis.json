{
  "product": {
    "name": "CellSorter",
    "version": "1.0.0",
    "type": "Desktop Application",
    "platform": "Cross-platform (Windows/macOS)",
    "framework": "PySide6"
  },
  "vision": "Bridge the gap between cellular image analysis and physical tissue extraction, enabling precise, reproducible cell sorting workflows for pathology research and diagnostics",
  "target_users": {
    "primary": {
      "persona": "Research Pathologist",
      "experience": "10+ years",
      "usage": "Daily, 2-4 hours",
      "key_needs": [
        "Identify specific cell populations",
        "Extract precise tissue regions",
        "Maintain reproducible protocols"
      ]
    },
    "secondary": {
      "persona": "Laboratory Technician",
      "experience": "5 years",
      "usage": "Daily, 4-6 hours",
      "key_needs": [
        "Execute protocols accurately",
        "Process multiple samples efficiently",
        "Maintain quality control"
      ]
    },
    "tertiary": {
      "persona": "Graduate Student",
      "experience": "Limited",
      "usage": "2-3 times/week, 1-3 hours",
      "key_needs": [
        "Learn analysis techniques",
        "Generate thesis data",
        "Understand methodologies"
      ]
    }
  },
  "core_features": {
    "data_input": {
      "image_formats": ["TIFF", "JPG", "JPEG", "PNG"],
      "image_size_limit": "2GB",
      "csv_support": "CellProfiler format",
      "csv_record_limit": 100000
    },
    "visualization": {
      "scatter_plots": {
        "max_points": 50000,
        "render_time": "< 2 seconds",
        "interactions": ["pan", "zoom", "select"]
      },
      "image_display": {
        "zoom_range": "10% - 1000%",
        "overlay_support": true,
        "max_highlighted_cells": 10000
      }
    },
    "selection": {
      "method": "Rectangle selection (shift+drag)",
      "multiple_selections": true,
      "color_palette": 16,
      "custom_labels": true,
      "well_plate_mapping": "96-well (A01-H12)"
    },
    "calibration": {
      "type": "Two-point calibration",
      "accuracy": "0.1 micrometer",
      "transformation": "Affine matrix"
    },
    "export": {
      "primary_format": ".cxprotocol (INI-style)",
      "additional_formats": ["CSV", "PNG", "SVG"],
      "batch_export": true
    }
  },
  "performance_requirements": {
    "image_loading": "< 5 seconds for 500MB",
    "csv_parsing": "< 3 seconds for 50K records",
    "plot_rendering": "< 2 seconds for 50K points",
    "selection_highlighting": "< 1 second for 1K cells",
    "protocol_export": "< 10 seconds",
    "max_memory": "4GB typical workflow"
  },
  "platform_requirements": {
    "primary_os": "Windows 10/11 (64-bit)",
    "secondary_os": "macOS (future)",
    "min_hardware": {
      "ram": "8GB",
      "cpu": "Intel i5 or equivalent",
      "storage": "1GB",
      "display": "1920x1080"
    },
    "recommended_hardware": {
      "ram": "16GB",
      "cpu": "Intel i7 or equivalent",
      "storage": "5GB",
      "display": "2560x1440"
    }
  },
  "quality_attributes": {
    "reliability": {
      "uptime": "99.9%",
      "data_loss": "Zero tolerance",
      "error_recovery": "Auto-save and session recovery"
    },
    "usability": {
      "learning_time": "30 minutes to productivity",
      "ui_consistency": "Windows design guidelines",
      "accessibility": "WCAG 2.1 AA compliance"
    },
    "accuracy": {
      "coordinate_transformation": "< 1 micrometer error",
      "calibration": "< 1% distance measurement error",
      "extraction_success": "> 98% cell recovery"
    },
    "security": {
      "processing": "Local only (no network)",
      "data_handling": "Secure file operations",
      "permissions": "No admin required"
    }
  },
  "functional_areas": [
    {
      "id": "FR1",
      "name": "Data Input and Loading",
      "priority": "High",
      "components": [
        "Image Loading",
        "CSV Data Import",
        "File Format Validation"
      ]
    },
    {
      "id": "FR2",
      "name": "Data Visualization and Analysis",
      "priority": "High",
      "components": [
        "Scatter Plot Generation",
        "Cell Selection Interface",
        "Selection Management"
      ]
    },
    {
      "id": "FR3",
      "name": "Image Integration and Visualization",
      "priority": "High",
      "components": [
        "Cell Highlighting on Image",
        "Image Navigation"
      ]
    },
    {
      "id": "FR4",
      "name": "Coordinate Calibration System",
      "priority": "High",
      "components": [
        "Two-Point Calibration",
        "Coordinate Transformation"
      ]
    },
    {
      "id": "FR5",
      "name": "Well Plate Management",
      "priority": "Medium",
      "components": [
        "96-Well Plate Assignment",
        "Well Plate Visualization"
      ]
    },
    {
      "id": "FR6",
      "name": "Data Export and Protocol Generation",
      "priority": "High",
      "components": [
        "Protocol File Export",
        "Crop Region Calculation",
        "Data Export Options"
      ]
    }
  ],
  "use_cases": [
    {
      "name": "Cancer Cell Population Analysis",
      "user": "Research Pathologist",
      "workflow_time": "< 10 minutes",
      "expected_output": "150-300 cells per population"
    },
    {
      "name": "Rare Cell Detection and Extraction",
      "user": "Graduate Student",
      "workflow_time": "< 15 minutes",
      "expected_output": "10-20 rare cells from 10K+ total"
    },
    {
      "name": "Multi-Sample Comparative Study",
      "user": "Laboratory Technician",
      "workflow_time": "< 30 minutes per sample",
      "expected_output": "Consistent extraction across 20 samples"
    },
    {
      "name": "Quality Control and Method Validation",
      "user": "Research Pathologist",
      "workflow_time": "Variable",
      "expected_output": "Validated workflow with accuracy metrics"
    }
  ],
  "success_metrics": {
    "task_completion": "90% user success rate",
    "learning_curve": "< 5 minutes for basic tasks",
    "accuracy": "99.9% coordinate transformation",
    "data_integrity": "Zero data loss",
    "user_satisfaction": "95% satisfaction score"
  },
  "constraints": [
    "Must maintain cross-platform compatibility",
    "Cannot require internet connection",
    "Must follow WCAG 2.1 AA accessibility",
    "Limited to local file system operations",
    "Must integrate with existing CosmoSort hardware"
  ],
  "dependencies": {
    "external_systems": [
      "CellProfiler (CSV data source)",
      "CosmoSort Hardware (protocol consumer)",
      "96-Well Plate System"
    ],
    "file_formats": [
      "TIFF/JPG/JPEG/PNG (images)",
      "CSV (CellProfiler format)",
      ".cxprotocol (INI-style export)"
    ]
  },
  "extracted_tasks": [
    {
      "category": "Core Infrastructure",
      "tasks": [
        "Application framework setup",
        "File I/O system",
        "Error handling framework",
        "Session management"
      ]
    },
    {
      "category": "Data Processing",
      "tasks": [
        "Image loader (multi-format)",
        "CSV parser with validation",
        "Coordinate transformer",
        "Crop region calculator"
      ]
    },
    {
      "category": "Visualization",
      "tasks": [
        "Scatter plot widget",
        "Image viewer with overlays",
        "Well plate visualizer",
        "Selection manager UI"
      ]
    },
    {
      "category": "User Interaction",
      "tasks": [
        "Rectangle selection tool",
        "Calibration interface",
        "Color/label assignment",
        "Export dialog"
      ]
    },
    {
      "category": "Integration",
      "tasks": [
        "CellProfiler data compatibility",
        "CosmoSort protocol generation",
        "Batch processing system",
        "Quality validation"
      ]
    }
  ]
}